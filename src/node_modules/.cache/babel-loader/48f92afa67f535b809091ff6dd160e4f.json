{"ast":null,"code":"var GUAGE_FOREGROUND = \"#FFFFFF\";\nvar GUAGE_BACKGROUND = \"#191921\";\nvar BACKGROUND = \"#000\";\nvar BUG = \"#F844F8\";\nexport function VerticalSpeedIndicator(ctx, location, fontSize, data) {\n  this.ctx = ctx;\n  this.data = data;\n  this.loc = location;\n  this.fontSize = fontSize;\n  this.max = 2000;\n\n  this.update = function (data) {\n    this.data = data;\n  };\n\n  this.draw = function () {\n    var verticalSpeed = this.data.verticalSpeed;\n\n    if (this.data.verticalSpeed > this.max) {\n      verticalSpeed = this.max;\n    } else if (this.data.verticalSpeed < -this.max) {\n      verticalSpeed = -this.max;\n    }\n\n    this.drawBackground(this.data.verticalSpeed);\n    this.drawBug(this.data.verticalSpeedBug); // this.drawArrow(verticalSpeed);\n\n    this.drawPointer(verticalSpeed);\n    this.ctx.save();\n    this.ctx.fillStyle = GUAGE_FOREGROUND;\n    this.ctx.font = 25 + \"px Arial\";\n    this.ctx.textAlign = \"center\";\n    this.ctx.textBaseline = \"middle\";\n    var text = \"VSPEED\";\n    var textWidth = ctx.measureText(text).width;\n    this.ctx.fillText(text, this.loc.x + textWidth / 2, this.loc.y - 20);\n    this.ctx.restore();\n  };\n\n  this.drawBackground = function (verticalSpeed) {\n    var x = this.loc.x;\n    var y = this.loc.y;\n    var wid = this.loc.width;\n    var hei = this.loc.height;\n    var ctx = this.ctx;\n    var fontSize = this.fontSize;\n    ctx.save();\n    ctx.translate(x, y);\n    ctx.fillStyle = GUAGE_BACKGROUND;\n    ctx.fillRect(0, 0, wid / 4, hei);\n    ctx.fillStyle = BACKGROUND;\n    ctx.fillRect(wid / 4 + 3, 0, wid * 3 / 4, hei);\n    ctx.translate(0, hei / 2);\n    ctx.fillRect(wid / 4 + 3, -fontSize / 2, wid * 3 / 4, fontSize);\n    ctx.strokeRect(wid / 4 + 3, -fontSize / 2, wid * 3 / 4, fontSize);\n    ctx.fillStyle = GUAGE_FOREGROUND;\n    ctx.font = fontSize + \"px Arial\";\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"middle\";\n    ctx.fillText(verticalSpeed, wid / 4 + 3 + wid * 1.5 / 4, 0);\n    ctx.font = \"15px Arial\";\n    ctx.textAlign = \"left\";\n    var list = [-2, -1.5, -1.0, -0.5, -0.250, 0.250, 0.5, 1, 1.5, 2];\n\n    for (var i = 0; i < list.length; i++) {\n      var value = list[i];\n      var newY = this.getYFromValue(value, this.max) * 500;\n      ctx.fillText(value, wid / 4 + 3, newY);\n    }\n\n    ctx.restore();\n  };\n\n  this.drawArrow = function (value) {\n    ctx.save();\n    ctx.translate(this.loc.x, this.loc.y + this.loc.height / 2);\n    var totalWidth = this.loc.width / 4;\n    var height = this.getYFromValue(value) * 500;\n    var arrowWidth = 0.5 * totalWidth;\n    ctx.fillStyle = GUAGE_FOREGROUND;\n    ctx.beginPath();\n\n    if (height > 0) {\n      ctx.moveTo(2, height - arrowWidth);\n      ctx.lineTo(totalWidth / 2, height); // Top\n\n      ctx.lineTo(totalWidth - 2, height - arrowWidth);\n      ctx.fillRect((totalWidth - arrowWidth) / 2, 0, arrowWidth, height - arrowWidth);\n    } else {\n      ctx.moveTo(2, height + arrowWidth);\n      ctx.lineTo(totalWidth / 2, height); // Top\n\n      ctx.lineTo(totalWidth - 2, height + arrowWidth);\n      ctx.fillRect((totalWidth - arrowWidth) / 2, 0, arrowWidth, height + arrowWidth);\n    }\n\n    ctx.closePath();\n    ctx.stroke();\n    ctx.fill();\n    ctx.restore();\n  };\n\n  this.drawPointer = function (value) {\n    ctx.save();\n    ctx.translate(this.loc.x, this.loc.y + this.loc.height / 2);\n    var totalWidth = this.loc.width / 4;\n    var height = this.getYFromValue(value) * 500;\n    var arrowWidth = 0.35 * totalWidth;\n    ctx.fillStyle = GUAGE_FOREGROUND;\n    ctx.beginPath();\n    ctx.moveTo(0, height - arrowWidth);\n    ctx.lineTo(totalWidth * 0.8, height - arrowWidth);\n    ctx.lineTo(totalWidth, height);\n    ctx.lineTo(totalWidth * 0.8, height + arrowWidth);\n    ctx.lineTo(0, height + arrowWidth);\n    ctx.closePath();\n    ctx.fill();\n    ctx.restore();\n  };\n\n  this.drawBug = function (value) {\n    ctx.save();\n    ctx.translate(this.loc.x, this.loc.y + this.loc.height / 2);\n    var totalWidth = this.loc.width / 4;\n    var height = this.getYFromValue(value) * 500;\n    var arrowWidth = 0.35 * totalWidth;\n    ctx.fillStyle = BUG;\n    ctx.beginPath();\n    ctx.moveTo(totalWidth, height - arrowWidth);\n    ctx.lineTo(totalWidth * 0.8, height - arrowWidth);\n    ctx.lineTo(totalWidth, height);\n    ctx.lineTo(totalWidth * 0.8, height + arrowWidth);\n    ctx.lineTo(totalWidth, height + arrowWidth);\n    ctx.closePath();\n    ctx.fill();\n    ctx.restore();\n  };\n\n  this.getYFromValue = function (value, max) {\n    var absValue = Math.abs(value);\n    var mapped = (-0.00002 * absValue * absValue + 0.08 * absValue) / 85;\n\n    if (value < 0) {\n      return mapped * (this.loc.height / 2);\n    } else {\n      return -mapped * (this.loc.height / 2);\n    }\n  };\n\n  return this;\n}\n_c = VerticalSpeedIndicator;\n\nvar _c;\n\n$RefreshReg$(_c, \"VerticalSpeedIndicator\");","map":{"version":3,"sources":["/home/alexemdesgagne/octopus-telemetry/src/src/components/PFD/guages/vertical_speed.js"],"names":["GUAGE_FOREGROUND","GUAGE_BACKGROUND","BACKGROUND","BUG","VerticalSpeedIndicator","ctx","location","fontSize","data","loc","max","update","draw","verticalSpeed","drawBackground","drawBug","verticalSpeedBug","drawPointer","save","fillStyle","font","textAlign","textBaseline","text","textWidth","measureText","width","fillText","x","y","restore","wid","hei","height","translate","fillRect","strokeRect","list","i","length","value","newY","getYFromValue","drawArrow","totalWidth","arrowWidth","beginPath","moveTo","lineTo","closePath","stroke","fill","absValue","Math","abs","mapped"],"mappings":"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","sourcesContent":["\nvar GUAGE_FOREGROUND = \"#FFFFFF\";\nvar GUAGE_BACKGROUND = \"#191921\";\nvar BACKGROUND = \"#000\";\nvar BUG = \"#F844F8\";\n\nexport function VerticalSpeedIndicator(ctx, location, fontSize, data)\n{\n\tthis.ctx = ctx;\n\tthis.data = data;\n\tthis.loc = location;\n\tthis.fontSize = fontSize;\n\tthis.max = 2000;\n\n\tthis.update = function(data)\n\t{\n\t\tthis.data = data;\n\t}\n\n\tthis.draw = function()\n\t{\n\t\tvar verticalSpeed = this.data.verticalSpeed;\n\t\tif (this.data.verticalSpeed > this.max)\n\t\t{\n\t\t\tverticalSpeed = this.max;\n\t\t}\n\t\telse if (this.data.verticalSpeed < - this.max)\n\t\t{\n\t\t\tverticalSpeed = - this.max;\n\t\t}\n\n\t\tthis.drawBackground(this.data.verticalSpeed);\n\t\tthis.drawBug(this.data.verticalSpeedBug)\n\t\t// this.drawArrow(verticalSpeed);\n\t\tthis.drawPointer(verticalSpeed);\n\n\t\tthis.ctx.save();\n\t\tthis.ctx.fillStyle = GUAGE_FOREGROUND;\n\t\tthis.ctx.font = 25 + \"px Arial\"\n\t\tthis.ctx.textAlign = \"center\";\n\t\tthis.ctx.textBaseline = \"middle\";\n\t\tvar text = \"VSPEED\"\n\t\tvar textWidth = ctx.measureText(text).width;\n\t\tthis.ctx.fillText(text, this.loc.x + textWidth / 2, this.loc.y - 20)\n\t\tthis.ctx.restore();\n\t}\n\n\tthis.drawBackground = function(verticalSpeed)\n\t{\n\t\tvar x = this.loc.x;\n\t\tvar y = this.loc.y;\n\t\tvar wid = this.loc.width;\n\t\tvar hei = this.loc.height;\n\t\tvar ctx = this.ctx;\n\t\tvar fontSize = this.fontSize;\n\n\t\tctx.save();\n\t\tctx.translate(x, y);\n\t\tctx.fillStyle = GUAGE_BACKGROUND;\n\t\tctx.fillRect(0, 0, wid / 4, hei);\n\t\tctx.fillStyle = BACKGROUND;\n\t\tctx.fillRect(wid / 4 + 3, 0, wid * 3 / 4, hei);\n\n\t\tctx.translate(0, hei / 2);\n\t\tctx.fillRect(wid / 4 + 3, -fontSize / 2, wid * 3 / 4, fontSize);\n\t\tctx.strokeRect(wid / 4 + 3, -fontSize / 2, wid * 3 / 4, fontSize);\n\n\t\tctx.fillStyle = GUAGE_FOREGROUND;\n\t\tctx.font = fontSize + \"px Arial\"\n\t\tctx.textAlign = \"center\";\n\t\tctx.textBaseline = \"middle\"; \n\t\tctx.fillText(verticalSpeed, wid / 4 + 3 + wid * 1.5 / 4, 0);\n\n\t\tctx.font = \"15px Arial\"\n\t\tctx.textAlign = \"left\";\n\t\tvar list = [-2, -1.5, -1.0, -0.5, -0.250, 0.250, 0.5, 1, 1.5, 2];\n\t\tfor (var i = 0; i < list.length; i++)\n\t\t{\n\t\t\tvar value = list[i];\n\t\t\tvar newY = this.getYFromValue(value, this.max) * 500;\n\t\t\tctx.fillText(value, wid / 4 + 3, newY)\n\t\t}\n\t\t\n\t\tctx.restore();\n\t}\n\n\tthis.drawArrow = function(value)\n\t{\n\t\tctx.save();\n\t\tctx.translate(this.loc.x, this.loc.y + this.loc.height / 2);\n\n\t\tvar totalWidth = this.loc.width / 4;\n\t\tvar height = this.getYFromValue(value) * 500;\n\t\tvar arrowWidth = 0.5 * totalWidth;\n\t\tctx.fillStyle = GUAGE_FOREGROUND;\n\t\tctx.beginPath();\n\t\tif (height > 0)\n\t\t{\n\t\t\tctx.moveTo(2, height - arrowWidth);\n\t\t\tctx.lineTo(totalWidth / 2, height); // Top\n\t\t\tctx.lineTo(totalWidth - 2,  height - arrowWidth);\n\t\t\tctx.fillRect((totalWidth - arrowWidth) / 2, 0, arrowWidth, height - arrowWidth);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tctx.moveTo(2,  height + arrowWidth);\n\t\t\tctx.lineTo(totalWidth / 2,  height); // Top\n\t\t\tctx.lineTo(totalWidth - 2,   height + arrowWidth);\n\t\t\tctx.fillRect((totalWidth - arrowWidth) / 2, 0, arrowWidth, height + arrowWidth);\n\t\t}\n\n\t\tctx.closePath();\n\t\tctx.stroke();\n\t\tctx.fill();\n\t\tctx.restore();\n\t}\n\n\tthis.drawPointer = function(value)\n\t{\t\n\t\tctx.save();\n\t\tctx.translate(this.loc.x, this.loc.y + this.loc.height / 2);\n\n\t\tvar totalWidth = this.loc.width / 4;\n\t\tvar height = this.getYFromValue(value) * 500;\n\t\tvar arrowWidth = 0.35 * totalWidth;\n\t\tctx.fillStyle = GUAGE_FOREGROUND;\n\t\tctx.beginPath();\n\t\tctx.moveTo(0, height - arrowWidth); \n\t\tctx.lineTo(totalWidth * 0.8, height - arrowWidth);\n\t\tctx.lineTo(totalWidth, height);\n\t\tctx.lineTo(totalWidth * 0.8, height + arrowWidth);\n\t\tctx.lineTo(0, height + arrowWidth);\n\t\tctx.closePath();\n\t\tctx.fill();\n\t\tctx.restore();\n\t}\n\n\tthis.drawBug = function(value)\n\t{\t\n\t\tctx.save();\n\t\tctx.translate(this.loc.x, this.loc.y + this.loc.height / 2);\n\n\t\tvar totalWidth = this.loc.width / 4;\n\t\tvar height = this.getYFromValue(value) * 500;\n\t\tvar arrowWidth = 0.35 * totalWidth;\n\n\t\tctx.fillStyle = BUG;\n\t\tctx.beginPath();\n\t\tctx.moveTo(totalWidth, height - arrowWidth); \n\t\tctx.lineTo(totalWidth * 0.8, height - arrowWidth);\n\t\tctx.lineTo(totalWidth, height);\n\t\tctx.lineTo(totalWidth * 0.8, height + arrowWidth);\n\t\tctx.lineTo(totalWidth, height + arrowWidth);\n\t\tctx.closePath();\n\t\tctx.fill();\n\t\tctx.restore();\n\t}\n\n\tthis.getYFromValue = function(value, max)\n\t{\n\t\tvar absValue = Math.abs(value);\n\t\tvar mapped = ((-0.00002 * absValue * absValue + 0.08 * absValue) / 85);\n\t\tif (value < 0)\n\t\t{\n\t\t\treturn mapped * (this.loc.height / 2); \n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn - mapped * (this.loc.height / 2); \n\t\t}\n\t}\n\n\treturn this;\n}"]},"metadata":{},"sourceType":"module"}