{"ast":null,"code":"var GUAGE_FOREGROUND = \"#FFFFFF\";\nvar GROUND = \"#752E00\";\nvar SKY = \"#0072B9\";\nexport function AttitudeIndicator(ctx, location, pixelsPerDegree, data) {\n  this.ctx = ctx;\n  this.data = data;\n  this.loc = location;\n  this.pixelsPerDegree = pixelsPerDegree;\n\n  this.update = function (data) {\n    this.data = data;\n  };\n\n  this.draw = function () {\n    this.drawBackground(this.data.pitchAngle, this.data.bankAngle);\n    this.drawForeground(this.data.turnCoordinationAngle);\n  };\n\n  this.drawBackground = function (pitchAngle, bankAngle, turnCoordinationAngle) {\n    var ctx = this.ctx;\n    var x = this.loc.x;\n    var y = this.loc.y;\n    var wid = this.loc.width;\n    var hei = this.loc.height;\n    ctx.save();\n    ctx.rect(x, y, wid, hei);\n    ctx.clip();\n    ctx.translate(x + wid / 2, y + hei / 2);\n    ctx.rotate(bankAngle * Math.PI / 180);\n    ctx.translate(0, this.pixelsPerDegree * pitchAngle);\n    ctx.fillStyle = SKY;\n    ctx.fillRect(-wid, -1000, 2 * wid, 1000);\n    ctx.fillStyle = GROUND;\n    ctx.fillRect(-wid, 0, 2 * wid, 1000);\n    ctx.fillStyle = GUAGE_FOREGROUND;\n    ctx.fillRect(-wid, 0, 2 * wid, 1);\n    var WIDTH_TEN = 100;\n    var WIDTH_FIVE = 50;\n\n    for (var i = -90; i < 90; i += 5) {\n      ctx.fillStyle = GUAGE_FOREGROUND;\n      ctx.font = \"15px Arial\";\n      ctx.textAlign = \"center\";\n      ctx.textBaseline = 'middle';\n      var newY = -i * this.pixelsPerDegree;\n\n      if (i % 10 === 0 && i !== 0) {\n        ctx.fillRect(-WIDTH_TEN / 2, newY, WIDTH_TEN, 1);\n        ctx.fillText(i, -WIDTH_TEN / 2 - 20, newY);\n        ctx.fillText(i, +WIDTH_TEN / 2 + 20, newY);\n      } else if (i !== 0) {\n        ctx.fillRect(-WIDTH_FIVE / 2, newY, WIDTH_FIVE, 1);\n      }\n    }\n\n    ctx.restore();\n  };\n\n  this.drawForeground = function (turnCoordinationAngle) {\n    var x = this.loc.x;\n    var y = this.loc.y;\n    var wid = this.loc.width;\n    var hei = this.loc.height;\n    ctx.save();\n    ctx.translate(x + wid / 2, y + hei / 2);\n    ctx.fillStyle = \"#000\";\n    ctx.strokeStyle = GUAGE_FOREGROUND;\n    ctx.beginPath();\n    ctx.moveTo(-125, -3);\n    ctx.lineTo(-50, -3);\n    ctx.lineTo(-50, 20);\n    ctx.lineTo(-56, 20);\n    ctx.lineTo(-56, 3);\n    ctx.lineTo(-125, 3);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.fill();\n    ctx.beginPath();\n    ctx.moveTo(125, -3);\n    ctx.lineTo(50, -3);\n    ctx.lineTo(50, 20);\n    ctx.lineTo(56, 20);\n    ctx.lineTo(56, 3);\n    ctx.lineTo(125, 3);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.fill();\n    var boxWidth = 15;\n    ctx.rect(-boxWidth, -boxWidth, 2 * boxWidth, 2 * boxWidth);\n    ctx.stroke();\n    ctx.fill();\n    ctx.fillStyle = GUAGE_FOREGROUND;\n    ctx.beginPath();\n    ctx.arc(turnCoordinationAngle * this.pixelsPerDegree, 0, boxWidth - 2, 0, 2 * Math.PI);\n    ctx.stroke();\n    ctx.fill();\n    ctx.restore();\n  };\n\n  return this;\n}\n_c = AttitudeIndicator;\n\nvar _c;\n\n$RefreshReg$(_c, \"AttitudeIndicator\");","map":{"version":3,"sources":["/home/alexemdesgagne/octopus-telemetry/src/src/components/PFD/guages/attitude_indicator.js"],"names":["GUAGE_FOREGROUND","GROUND","SKY","AttitudeIndicator","ctx","location","pixelsPerDegree","data","loc","update","draw","drawBackground","pitchAngle","bankAngle","drawForeground","turnCoordinationAngle","x","y","wid","width","hei","height","save","rect","clip","translate","rotate","Math","PI","fillStyle","fillRect","WIDTH_TEN","WIDTH_FIVE","i","font","textAlign","textBaseline","newY","fillText","restore","strokeStyle","beginPath","moveTo","lineTo","closePath","stroke","fill","boxWidth","arc"],"mappings":"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","sourcesContent":["\n\nvar GUAGE_FOREGROUND = \"#FFFFFF\";\nvar GROUND = \"#752E00\";\nvar SKY = \"#0072B9\";\n\nexport function AttitudeIndicator(ctx, location, pixelsPerDegree, data) {\n\tthis.ctx = ctx;\n\tthis.data = data;\n\tthis.loc = location;\n\tthis.pixelsPerDegree = pixelsPerDegree;\n\n\tthis.update = function (data) {\n\t\tthis.data = data;\n\t}\n\n\tthis.draw = function () {\n\t\tthis.drawBackground(this.data.pitchAngle, this.data.bankAngle);\n\t\tthis.drawForeground(this.data.turnCoordinationAngle);\n\t}\n\n\tthis.drawBackground = function (pitchAngle, bankAngle, turnCoordinationAngle) {\n\t\tvar ctx = this.ctx;\n\n\t\tvar x = this.loc.x;\n\t\tvar y = this.loc.y;\n\t\tvar wid = this.loc.width;\n\t\tvar hei = this.loc.height;\n\n\t\tctx.save();\n\t\tctx.rect(x, y, wid, hei);\n\t\tctx.clip();\n\n\t\tctx.translate(x + wid / 2, y + hei / 2);\n\n\t\tctx.rotate(bankAngle * Math.PI / 180);\n\t\tctx.translate(0, this.pixelsPerDegree * pitchAngle);\n\n\t\tctx.fillStyle = SKY;\n\t\tctx.fillRect(- wid, -1000, 2 * wid, 1000);\n\t\tctx.fillStyle = GROUND;\n\t\tctx.fillRect(- wid, 0, 2 * wid, 1000);\n\t\tctx.fillStyle = GUAGE_FOREGROUND;\n\t\tctx.fillRect(- wid, 0, 2 * wid, 1);\n\n\t\tvar WIDTH_TEN = 100;\n\t\tvar WIDTH_FIVE = 50;\n\n\t\tfor (var i = -90; i < 90; i += 5) {\n\t\t\tctx.fillStyle = GUAGE_FOREGROUND;\n\t\t\tctx.font = \"15px Arial\";\n\t\t\tctx.textAlign = \"center\"\n\t\t\tctx.textBaseline = 'middle';\n\t\t\tvar newY = - i * (this.pixelsPerDegree)\n\t\t\tif (i % 10 === 0 && i !== 0) {\n\t\t\t\tctx.fillRect(- WIDTH_TEN / 2, newY, WIDTH_TEN, 1);\n\t\t\t\tctx.fillText(i, - WIDTH_TEN / 2 - 20, newY);\n\t\t\t\tctx.fillText(i, + WIDTH_TEN / 2 + 20, newY);\n\t\t\t}\n\t\t\telse if (i !== 0) {\n\t\t\t\tctx.fillRect(- WIDTH_FIVE / 2, newY, WIDTH_FIVE, 1);\n\t\t\t}\n\t\t}\n\n\t\tctx.restore();\n\t}\n\n\tthis.drawForeground = function (turnCoordinationAngle) {\n\t\tvar x = this.loc.x;\n\t\tvar y = this.loc.y;\n\t\tvar wid = this.loc.width;\n\t\tvar hei = this.loc.height;\n\n\t\tctx.save();\n\t\tctx.translate(x + wid / 2, y + hei / 2);\n\n\t\tctx.fillStyle = \"#000\";\n\t\tctx.strokeStyle = GUAGE_FOREGROUND;\n\t\tctx.beginPath();\n\t\tctx.moveTo(-125, -3);\n\t\tctx.lineTo(-50, -3);\n\t\tctx.lineTo(-50, 20);\n\t\tctx.lineTo(-56, 20);\n\t\tctx.lineTo(-56, 3);\n\t\tctx.lineTo(-125, 3);\n\t\tctx.closePath();\n\t\tctx.stroke();\n\t\tctx.fill();\n\n\t\tctx.beginPath();\n\t\tctx.moveTo(125, -3);\n\t\tctx.lineTo(50, -3);\n\t\tctx.lineTo(50, 20);\n\t\tctx.lineTo(56, 20);\n\t\tctx.lineTo(56, 3);\n\t\tctx.lineTo(125, 3);\n\t\tctx.closePath();\n\t\tctx.stroke();\n\t\tctx.fill();\n\n\t\tvar boxWidth = 15;\n\n\t\tctx.rect(-boxWidth, -boxWidth, 2 * boxWidth, 2 * boxWidth);\n\t\tctx.stroke();\n\t\tctx.fill();\n\n\t\tctx.fillStyle = GUAGE_FOREGROUND;\n\t\tctx.beginPath();\n\t\tctx.arc(turnCoordinationAngle * this.pixelsPerDegree, 0, boxWidth - 2, 0, 2 * Math.PI);\n\t\tctx.stroke();\n\t\tctx.fill();\n\n\t\tctx.restore();\n\t}\n\n\treturn this;\n}\n"]},"metadata":{},"sourceType":"module"}