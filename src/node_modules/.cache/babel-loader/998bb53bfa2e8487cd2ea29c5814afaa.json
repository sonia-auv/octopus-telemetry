{"ast":null,"code":"var _jsxFileName = \"/home/alexemdesgagne/octopus-telemetry/src/src/components/VisionUiExecution.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useCallback, useRef } from 'react';\nimport TextField from './common/textfield/Textfield';\nimport Select from './common/select/Select';\nimport FormControl from './common/Form/FormControl';\nimport InputLabel from './common/Input/InputLabel';\nimport Button from './common/button/Button';\nimport { MCachedIcon as CachedIcon } from './common/Icons/Icon';\nimport { useROSService, ServiceRequestFactory } from '../hooks/useROSService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst VisionUIExecutionTabModule = () => {\n  _s();\n\n  const [name, setName] = useState('');\n  const [filterChainList, setfilterChainList] = useState([]);\n  const [filterChainSelected, setFilterChainSelected] = useState('');\n  const [mediaSelected, setMediaSelected] = useState('');\n  const [mediaList, setMediaList] = useState([]);\n  const [file, setFile] = useState('');\n  const [topicName, setTopicName] = useState('');\n\n  const handleNameChange = e => {\n    setName(e.target.value);\n  };\n\n  const handleChangeFilterChain = x => {\n    setFilterChainSelected(x.target.value);\n  };\n\n  const handleChangeMedia = x => {\n    setMediaSelected(x.target.value);\n  };\n\n  function fileDialogClicked(event) {\n    setFile(event.target.files[0].name);\n  }\n\n  const inputFile = useRef(null);\n\n  const handleFileOpen = () => {\n    if (inputFile.current) {\n      inputFile.current.click();\n    }\n  };\n\n  const handleTopicNameChange = e => {\n    setTopicName(e.target.value);\n  };\n\n  const startMediaCmdServiceCallback = useCallback(x => {}, []);\n  const executeCmdServiceCallback = useCallback(x => {}, []); // Start media service\n\n  const startMediaCmdServiceCall = useROSService(startMediaCmdServiceCallback, \"/provider_vision/start_stop_camera\", \"sonia_common/StartStopMedia\"); // Execute command service\n\n  const executeCmdServiceCall = useROSService(executeCmdServiceCallback, \"/proc_image_processing/execute_cmd\", \"sonia_common/ExecuteCmd\");\n\n  const handleCreate = () => {\n    if (name !== '') {\n      //Topic mode\n      var media = topicName; // Video mode\n\n      if (media === '' && file !== '') {\n        media = file;\n        var request = ServiceRequestFactory({\n          camera_name: media,\n          action: 1\n        });\n        startMediaCmdServiceCall(request);\n        media = '/provider_vision' + media.replace('.', '');\n      } // Normal mode\n\n\n      if (media === '') {\n        media = mediaSelected;\n      }\n\n      if (media !== '' && filterChainSelected !== '') {\n        var request2 = ServiceRequestFactory({\n          node_name: name,\n          filterchain_name: filterChainSelected,\n          media_name: media,\n          cmd: 1\n        });\n        executeCmdServiceCall(request2);\n      }\n    }\n  };\n\n  const getFilterChainlistServiceCallback = useCallback(x => {\n    var receivedList = x.list;\n    var tab = [];\n    receivedList.split(';').forEach((v, index) => {\n      tab.push({\n        value: v\n      });\n    }); // Sort values\n\n    tab.sort((a, b) => a.value !== b.value ? a.value < b.value ? -1 : 1 : 0);\n    setfilterChainList(tab);\n  }, []);\n  const getFilterChainlistServiceCall = useROSService(getFilterChainlistServiceCallback, \"/proc_image_processing/get_information_list\", \"sonia_common/GetInformationList\");\n\n  const handleRefreshFilterChainList = () => {\n    var request = ServiceRequestFactory({\n      cmd: 3\n    });\n    getFilterChainlistServiceCall(request);\n  };\n\n  const getMedialistServiceCallback = useCallback(x => {\n    var receivedList = x.list;\n    var tab = [];\n    receivedList.split(';').forEach((v, index) => {\n      tab.push({\n        id: index,\n        value: v\n      });\n    }); // Sort values\n\n    tab.sort((a, b) => a.value !== b.value ? a.value < b.value ? -1 : 1 : 0);\n    setMediaList(tab);\n  }, []);\n  const getMedialistServiceCall = useROSService(getMedialistServiceCallback, \"/proc_image_processing/get_information_list\", \"sonia_common/GetInformationList\");\n\n  const handleRefreshMediaList = () => {\n    var request = ServiceRequestFactory({\n      cmd: 2\n    });\n    getMedialistServiceCall(request);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(TextField, {\n      value: name,\n      handlerChange: handleNameChange,\n      handlerKeyDown: () => {},\n      id: \"visionUi_name_id\",\n      label: \"Name\",\n      fullWidth: true,\n      style: {\n        padding: '10px 10px',\n        backgroundColor: 'white'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n        id: \"selectFilterChain-outlined-label\",\n        children: \"Filterchain\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        labelId: \"selectFilterChain-outlined-label\",\n        fullWidth: true,\n        id: \"selectFilterChain-outlined\",\n        handlerChange: handleChangeFilterChain,\n        label: \"Filter chain\",\n        value: filterChainSelected ? filterChainSelected : \"None\",\n        style: {\n          backgroundColor: 'white'\n        },\n        listValue: filterChainList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      label: /*#__PURE__*/_jsxDEV(CachedIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 24\n      }, this),\n      handler: handleRefreshFilterChainList,\n      isIcon: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n        id: \"selectMedia-outlined-label\",\n        children: \"Media\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        labelId: \"selectMedia-outlined-label\",\n        fullWidth: true,\n        id: \"selectMedia-outlined\",\n        handlerChange: handleChangeMedia,\n        label: \"Media\",\n        value: mediaSelected ? mediaSelected : \"None\",\n        style: {\n          backgroundColor: 'white'\n        },\n        listValue: mediaList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      label: /*#__PURE__*/_jsxDEV(CachedIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 24\n      }, this),\n      handler: handleRefreshMediaList,\n      isIcon: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '80%',\n        float: 'left'\n      },\n      children: /*#__PURE__*/_jsxDEV(TextField, {\n        handlerChange: () => {},\n        handlerKeyDown: () => {},\n        disabled: true,\n        value: file,\n        id: \"file_id\",\n        label: \"File\",\n        fullWidth: true,\n        style: {\n          padding: '10px 10px',\n          marginTop: '10px',\n          backgroundColor: 'white'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      id: \"file\",\n      ref: inputFile,\n      onChange: fileDialogClicked,\n      style: {\n        display: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        float: 'right'\n      },\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          fontSize: '20px',\n          marginTop: '22px'\n        },\n        handler: handleFileOpen,\n        label: \"...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 45\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      value: topicName,\n      handlerChange: handleTopicNameChange,\n      handlerKeyDown: () => {},\n      id: \"visionUi_topicname_id\",\n      label: \"Topic Name\",\n      fullWidth: true,\n      style: {\n        padding: '10px 10px',\n        marginTop: '10px',\n        backgroundColor: 'white',\n        float: 'left'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      style: {\n        fontSize: '15px',\n        marginTop: '10px',\n        float: 'right'\n      },\n      handler: handleCreate,\n      label: \"Create\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 9\n  }, this);\n};\n\n_s(VisionUIExecutionTabModule, \"oKf73yNah2pWPKRrt7yn4ugeOtk=\", false, function () {\n  return [useROSService, useROSService, useROSService, useROSService];\n});\n\n_c = VisionUIExecutionTabModule;\nexport default VisionUIExecutionTabModule;\n\nvar _c;\n\n$RefreshReg$(_c, \"VisionUIExecutionTabModule\");","map":{"version":3,"sources":["/home/alexemdesgagne/octopus-telemetry/src/src/components/VisionUiExecution.tsx"],"names":["useState","useCallback","useRef","TextField","Select","FormControl","InputLabel","Button","MCachedIcon","CachedIcon","useROSService","ServiceRequestFactory","VisionUIExecutionTabModule","name","setName","filterChainList","setfilterChainList","filterChainSelected","setFilterChainSelected","mediaSelected","setMediaSelected","mediaList","setMediaList","file","setFile","topicName","setTopicName","handleNameChange","e","target","value","handleChangeFilterChain","x","handleChangeMedia","fileDialogClicked","event","files","inputFile","handleFileOpen","current","click","handleTopicNameChange","startMediaCmdServiceCallback","executeCmdServiceCallback","startMediaCmdServiceCall","executeCmdServiceCall","handleCreate","media","request","camera_name","action","replace","request2","node_name","filterchain_name","media_name","cmd","getFilterChainlistServiceCallback","receivedList","list","tab","split","forEach","v","index","push","sort","a","b","getFilterChainlistServiceCall","handleRefreshFilterChainList","getMedialistServiceCallback","id","getMedialistServiceCall","handleRefreshMediaList","padding","backgroundColor","width","float","marginTop","display","fontSize"],"mappings":"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","sourcesContent":["import { useState, useCallback, useRef } from 'react';\n\nimport TextField from './common/textfield/Textfield';\nimport Select from './common/select/Select';\nimport FormControl from './common/Form/FormControl';\nimport InputLabel from './common/Input/InputLabel';\nimport Button from './common/button/Button'\nimport { MCachedIcon as CachedIcon } from './common/Icons/Icon';\n\nimport { useROSService, ServiceRequestFactory } from '../hooks/useROSService'\n\nconst VisionUIExecutionTabModule = () => {\n\n    const [name, setName] = useState('');\n    const [filterChainList, setfilterChainList] = useState<[]>([]);\n    const [filterChainSelected, setFilterChainSelected] = useState('');\n    const [mediaSelected, setMediaSelected] = useState('');\n    const [mediaList, setMediaList] = useState<[]>([]);\n    const [file, setFile] = useState('');\n    const [topicName, setTopicName] = useState('');\n\n    const handleNameChange = (e: any) => {\n        setName(e.target.value)\n    }\n\n    const handleChangeFilterChain = (x: any) => {\n\n        setFilterChainSelected(x.target.value)\n    }\n\n    const handleChangeMedia = (x: any) => {\n        setMediaSelected(x.target.value)\n    }\n\n    function fileDialogClicked(event: any) {\n        setFile(event.target.files[0].name)\n    }\n\n    const inputFile = useRef<HTMLInputElement>(null)\n\n    const handleFileOpen = () => {\n\n        if (inputFile.current) {\n            inputFile.current.click();\n        }\n\n    }\n\n    const handleTopicNameChange = (e: any) => {\n        setTopicName(e.target.value)\n    }\n\n    const startMediaCmdServiceCallback = useCallback(\n        (x: any) => {\n        }, []\n    )\n\n    const executeCmdServiceCallback = useCallback(\n        (x: any) => {\n        }, []\n    )\n\n    // Start media service\n    const startMediaCmdServiceCall = useROSService<any>(startMediaCmdServiceCallback, \"/provider_vision/start_stop_camera\", \"sonia_common/StartStopMedia\")\n\n    // Execute command service\n    const executeCmdServiceCall = useROSService<any>(executeCmdServiceCallback, \"/proc_image_processing/execute_cmd\", \"sonia_common/ExecuteCmd\")\n\n    const handleCreate = () => {\n\n        if (name !== '') {\n\n            //Topic mode\n            var media = topicName\n\n            // Video mode\n            if (media === '' && file !== '') {\n                media = file\n\n                var request = ServiceRequestFactory({ camera_name: media, action: 1 });\n                startMediaCmdServiceCall(request)\n                media = '/provider_vision' + media.replace('.', '')\n\n            }\n            // Normal mode\n            if (media === '') {\n                media = mediaSelected\n            }\n\n            if (media !== '' && filterChainSelected !== '') {\n                var request2 = ServiceRequestFactory({ node_name: name, filterchain_name: filterChainSelected, media_name: media, cmd: 1 });\n                executeCmdServiceCall(request2)\n            }\n        }\n    }\n\n    const getFilterChainlistServiceCallback = useCallback(\n        (x: any) => {\n\n            var receivedList = x.list\n\n            var tab: any = []\n            receivedList.split(';').forEach((v: String, index: number) => {\n                tab.push({ value: v })\n            });\n\n            // Sort values\n            tab.sort((a: any, b: any) => a.value !== b.value ? a.value < b.value ? -1 : 1 : 0);\n\n            setfilterChainList(tab);\n\n        }, []\n    )\n\n    const getFilterChainlistServiceCall = useROSService<any>(getFilterChainlistServiceCallback, \"/proc_image_processing/get_information_list\", \"sonia_common/GetInformationList\")\n\n    const handleRefreshFilterChainList = () => {\n        var request = ServiceRequestFactory({ cmd: 3 });\n        getFilterChainlistServiceCall(request)\n    }\n\n    const getMedialistServiceCallback = useCallback(\n        (x: any) => {\n\n            var receivedList = x.list\n\n            var tab: any = []\n            receivedList.split(';').forEach((v: String, index: number) => {\n                tab.push({ id: index, value: v })\n            });\n\n            // Sort values\n            tab.sort((a: any, b: any) => a.value !== b.value ? a.value < b.value ? -1 : 1 : 0);\n\n            setMediaList(tab);\n\n        }, []\n    )\n\n    const getMedialistServiceCall = useROSService<any>(getMedialistServiceCallback, \"/proc_image_processing/get_information_list\", \"sonia_common/GetInformationList\")\n\n    const handleRefreshMediaList = () => {\n        var request = ServiceRequestFactory({ cmd: 2 });\n        getMedialistServiceCall(request)\n    }\n\n    return (\n        <div>\n            <TextField value={name} handlerChange={handleNameChange} handlerKeyDown={() => { }} id=\"visionUi_name_id\" label=\"Name\" fullWidth={true} style={{ padding: '10px 10px', backgroundColor: 'white' }} />\n            <FormControl>\n                <InputLabel id=\"selectFilterChain-outlined-label\">Filterchain</InputLabel>\n                <Select\n                    labelId=\"selectFilterChain-outlined-label\"\n                    fullWidth={true}\n                    id=\"selectFilterChain-outlined\"\n                    handlerChange={handleChangeFilterChain}\n                    label=\"Filter chain\"\n                    value={filterChainSelected ? filterChainSelected : \"None\"}\n                    style={{ backgroundColor: 'white' }}\n                    listValue={filterChainList}\n                >\n                </Select>\n            </FormControl>\n            <Button\n                label={<CachedIcon />}\n                handler={handleRefreshFilterChainList}\n                isIcon={true}\n            ></Button>\n            <br></br>\n            <FormControl>\n                <InputLabel id=\"selectMedia-outlined-label\">Media</InputLabel>\n                <Select\n                    labelId=\"selectMedia-outlined-label\"\n                    fullWidth={true}\n                    id=\"selectMedia-outlined\"\n                    handlerChange={handleChangeMedia}\n                    label=\"Media\"\n                    value={mediaSelected ? mediaSelected : \"None\"}\n                    style={{ backgroundColor: 'white' }}\n                    listValue={mediaList}\n                >\n                </Select>\n            </FormControl>\n            <Button\n                label={<CachedIcon />}\n                handler={handleRefreshMediaList}\n                isIcon={true}\n            />\n            <br></br>\n            <div style={{ width: '80%', float: 'left' }} >\n                <TextField handlerChange={() => { }} handlerKeyDown={() => { }} disabled={true} value={file} id=\"file_id\" label=\"File\"\n                    fullWidth={true} style={{ padding: '10px 10px', marginTop: '10px', backgroundColor: 'white' }} />\n            </div>\n            <input type='file' id='file' ref={inputFile} onChange={fileDialogClicked} style={{ display: 'none' }} />\n            <div style={{ float: 'right' }}><Button style={{ fontSize: '20px', marginTop: '22px' }} handler={handleFileOpen} label=\"...\" /></div>\n            <br></br>\n            <TextField value={topicName} handlerChange={handleTopicNameChange} handlerKeyDown={() => { }} id=\"visionUi_topicname_id\" label=\"Topic Name\"\n                fullWidth={true} style={{ padding: '10px 10px', marginTop: '10px', backgroundColor: 'white', float: 'left' }} />\n            <Button style={{ fontSize: '15px', marginTop: '10px', float: 'right' }} handler={handleCreate} label=\"Create\" />\n        </div>\n    );\n};\n\nexport default VisionUIExecutionTabModule;\n"]},"metadata":{},"sourceType":"module"}