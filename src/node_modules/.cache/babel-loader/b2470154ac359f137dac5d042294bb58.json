{"ast":null,"code":"var GUAGE_BACKGROUND = \"#191921\";\nvar GUAGE_FOREGROUND = \"#FFFFFF\";\nvar BACKGROUND = \"#000\";\nvar SKY = \"#0072B9\";\nvar BUG = \"#F844F8\";\nexport function HorizontalSituationIndicator(ctx, location, fontSize, data) {\n  this.ctx = ctx;\n  this.data = data;\n  this.loc = location;\n  this.fontSize = fontSize;\n\n  this.update = function (data) {\n    this.data = data;\n  };\n\n  this.draw = function () {\n    this.drawBackground();\n    this.drawForeground(this.data.heading, this.data.trueCourse, this.data.headingBug);\n    this.ctx.save();\n    this.ctx.fillStyle = GUAGE_FOREGROUND;\n    this.ctx.font = 25 + \"px Arial\";\n    this.ctx.textAlign = \"center\";\n    this.ctx.textBaseline = \"middle\";\n    var text = \"YAW\";\n    this.ctx.fillText(text, this.loc.x + this.loc.width / 2, this.loc.y + this.loc.height / 2 + 20);\n    this.ctx.restore();\n  };\n\n  this.drawBackground = function () {\n    var ctx = this.ctx;\n    var x = this.loc.x;\n    var y = this.loc.y;\n    var wid = this.loc.width;\n    var hei = this.loc.height;\n    ctx.save();\n    ctx.rect(x, y, wid, hei);\n    ctx.clip();\n    ctx.fillStyle = BACKGROUND;\n    ctx.fillRect(x, y, wid, hei);\n    ctx.translate(x + wid / 2, y + hei); // Draw Arc\n\n    ctx.beginPath();\n    ctx.lineWidth = 1;\n    ctx.arc(0, -hei / 2, hei / 2 - 2, 0, 2 * Math.PI);\n    ctx.stroke(); // Draw plane cross icon\n\n    var planeWidth = 20;\n    ctx.fillStyle = GUAGE_FOREGROUND;\n    ctx.fillRect(-planeWidth, -3 - hei / 2, planeWidth * 2, planeWidth / 4);\n    ctx.restore();\n  };\n\n  this.drawForeground = function (heading, trueCourse, headingBug) {\n    var x = this.loc.x;\n    var y = this.loc.y;\n    var wid = this.loc.width;\n    var hei = this.loc.height;\n    ctx.save();\n    ctx.translate(x + wid / 2, y + hei / 2); // Draw heading line\n\n    ctx.strokeStyle = GUAGE_FOREGROUND;\n    ctx.lineWidth = 3;\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(0, -hei / 2 + 3);\n    ctx.stroke(); // Draw true course line\n\n    ctx.strokeStyle = SKY;\n    ctx.lineWidth = 2;\n    ctx.setLineDash([20, 5]);\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    var R = hei / 2 - 3;\n    var theta = -(heading - trueCourse) * Math.PI / 180 - Math.PI / 2;\n    var newX = R * Math.cos(theta);\n    var newY = R * Math.sin(theta);\n    ctx.lineTo(newX, newY); //ctx.stroke();\n    // Draw true heading bug line\n\n    ctx.strokeStyle = BUG;\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    R = hei / 2 - 3;\n    theta = -(heading - headingBug) * Math.PI / 180 - Math.PI / 2;\n    newX = R * Math.cos(theta);\n    newY = R * Math.sin(theta);\n    ctx.lineTo(newX, newY);\n    ctx.stroke(); // Draw box around heading numbers\n\n    ctx.setLineDash([]);\n    ctx.font = fontSize + \"px Arial\";\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"middle\";\n    ctx.fillStyle = GUAGE_BACKGROUND;\n    ctx.strokeStyle = GUAGE_FOREGROUND;\n    var boxHeight = this.fontSize;\n    var boxWidth = ctx.measureText(\"333\").width + 10;\n    ctx.fillRect(-boxWidth / 2, -hei / 2 + 0.5 * boxHeight, boxWidth, boxHeight);\n    ctx.strokeRect(-boxWidth / 2, -hei / 2 + 0.5 * boxHeight, boxWidth, boxHeight); // Draw heading numbers\n\n    ctx.fillStyle = GUAGE_FOREGROUND;\n    ctx.fillText(Math.floor(heading), 0, -hei / 2 + boxHeight); // Draw box around course numbers\n\n    ctx.font = 0.5 * fontSize + \"px Arial\";\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"middle\";\n    ctx.fillStyle = GUAGE_BACKGROUND;\n    ctx.strokeStyle = SKY;\n    boxHeight = this.fontSize;\n    boxWidth = ctx.measureText(\"333\").width + 10; // Draw course numbers\n\n    ctx.fillStyle = SKY;\n    ctx.restore();\n  };\n\n  return this;\n}\n_c = HorizontalSituationIndicator;\n\nvar _c;\n\n$RefreshReg$(_c, \"HorizontalSituationIndicator\");","map":{"version":3,"sources":["/home/alexemdesgagne/octopus-telemetry/src/src/components/PFD/guages/horizontal_situation.js"],"names":["GUAGE_BACKGROUND","GUAGE_FOREGROUND","BACKGROUND","SKY","BUG","HorizontalSituationIndicator","ctx","location","fontSize","data","loc","update","draw","drawBackground","drawForeground","heading","trueCourse","headingBug","save","fillStyle","font","textAlign","textBaseline","text","fillText","x","width","y","height","restore","wid","hei","rect","clip","fillRect","translate","beginPath","lineWidth","arc","Math","PI","stroke","planeWidth","strokeStyle","moveTo","lineTo","setLineDash","R","theta","newX","cos","newY","sin","boxHeight","boxWidth","measureText","strokeRect","floor"],"mappings":"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","sourcesContent":["\nvar GUAGE_BACKGROUND = \"#191921\";\nvar GUAGE_FOREGROUND = \"#FFFFFF\";\nvar BACKGROUND = \"#000\";\nvar SKY = \"#0072B9\";\nvar BUG = \"#F844F8\";\n\nexport function HorizontalSituationIndicator(ctx, location, fontSize, data)\n{\n\tthis.ctx = ctx;\n\tthis.data = data;\n\tthis.loc = location;\n\tthis.fontSize = fontSize;\n\n\tthis.update = function(data)\n\t{\n\t\tthis.data = data;\n\t}\n\n\tthis.draw = function()\n\t{\n\t\tthis.drawBackground();\n\t\tthis.drawForeground(this.data.heading, this.data.trueCourse, this.data.headingBug);\n\n\t\tthis.ctx.save();\n\t\tthis.ctx.fillStyle = GUAGE_FOREGROUND;\n\t\tthis.ctx.font = 25 + \"px Arial\"\n\t\tthis.ctx.textAlign = \"center\";\n\t\tthis.ctx.textBaseline = \"middle\";\n\t\tvar text = \"YAW\"\n\t\tthis.ctx.fillText(text, this.loc.x+ this.loc.width/2, this.loc.y + this.loc.height/2 + 20)\n\t\tthis.ctx.restore();\n\t}\n\n\tthis.drawBackground = function()\n\t{\n\t\tvar ctx = this.ctx;\n\n\t\tvar x = this.loc.x;\n\t\tvar y = this.loc.y;\n\t\tvar wid = this.loc.width;\n\t\tvar hei = this.loc.height;\n\n\t\tctx.save();\n\t\tctx.rect(x, y, wid, hei);\n\t\tctx.clip();\n\n\t\tctx.fillStyle = BACKGROUND;\n\t\tctx.fillRect(x, y, wid, hei);\n\t\tctx.translate(x + wid / 2, y + hei);\n\n\t\t// Draw Arc\n\t\tctx.beginPath();\n\t\tctx.lineWidth = 1;\n\t\tctx.arc(0, -hei/2, hei/2 - 2, 0, 2*Math.PI);\n\t\tctx.stroke();\n\n\t\t// Draw plane cross icon\n\t\tvar planeWidth = 20;\t\n\t\tctx.fillStyle = GUAGE_FOREGROUND;\n\t\tctx.fillRect(- planeWidth, -3 - hei/2, planeWidth * 2, planeWidth / 4);\n\n\t\tctx.restore();\n\t}\n\n\tthis.drawForeground = function(heading, trueCourse, headingBug)\n\t{\t\n\t\tvar x = this.loc.x;\n\t\tvar y = this.loc.y;\n\t\tvar wid = this.loc.width;\n\t\tvar hei = this.loc.height;\n\n\t\tctx.save();\n\t\tctx.translate(x + wid / 2, y + hei / 2);\n\n\t\t// Draw heading line\n\t\tctx.strokeStyle = GUAGE_FOREGROUND;\n\t\tctx.lineWidth = 3;\n\t\tctx.beginPath();\n\t\tctx.moveTo(0, 0);\n\t\tctx.lineTo(0, - hei/2 + 3);\n\t\tctx.stroke();\n\t\t\n\t\t// Draw true course line\n\t\tctx.strokeStyle = SKY;\n\t\tctx.lineWidth = 2;\n\t\tctx.setLineDash([20, 5]);\n\t\tctx.beginPath();\n\t\tctx.moveTo(0, 0);\n\t\tvar R = hei/2 - 3; \n\t\tvar theta = - (heading - trueCourse) * Math.PI / 180 - Math.PI / 2\n\t\tvar newX = (R * Math.cos(theta));\n\t\tvar newY = (R * Math.sin(theta));\n\t\tctx.lineTo(newX, newY);\n\t\t//ctx.stroke();\n\n\t\t// Draw true heading bug line\n\t\tctx.strokeStyle = BUG;\n\t\tctx.beginPath();\n\t\tctx.moveTo(0, 0);\n\t\tR = hei/2 - 3; \n\t\ttheta = - (heading - headingBug) * Math.PI / 180 - Math.PI / 2\n\t\tnewX = (R * Math.cos(theta));\n\t\tnewY = (R * Math.sin(theta));\n\t\tctx.lineTo(newX, newY);\n\t\tctx.stroke();\n\n\t\t// Draw box around heading numbers\n\t\tctx.setLineDash([]);\n\t\tctx.font = fontSize + \"px Arial\";\n\t\tctx.textAlign = \"center\";\n\t\tctx.textBaseline = \"middle\"; \n\t\tctx.fillStyle = GUAGE_BACKGROUND;\n\t\tctx.strokeStyle = GUAGE_FOREGROUND;\n\t\tvar boxHeight = this.fontSize;\n\t\tvar boxWidth = ctx.measureText(\"333\").width + 10;\n\t\tctx.fillRect(- boxWidth / 2, - hei/2 + 0.5 * boxHeight, boxWidth, boxHeight);\n\t\tctx.strokeRect(- boxWidth / 2, - hei/2 + 0.5 * boxHeight, boxWidth, boxHeight);\n\n\t\t// Draw heading numbers\n\t\tctx.fillStyle = GUAGE_FOREGROUND;\n\t\tctx.fillText(Math.floor(heading), 0, - hei/2 + boxHeight)\n\n\t\t// Draw box around course numbers\n\t\tctx.font = 0.5 * fontSize + \"px Arial\";\n\t\tctx.textAlign = \"center\";\n\t\tctx.textBaseline = \"middle\"; \n\t\tctx.fillStyle = GUAGE_BACKGROUND;\n\t\tctx.strokeStyle = SKY;\n\t\tboxHeight = this.fontSize;\n\t\tboxWidth = ctx.measureText(\"333\").width + 10;\n\n\t\t// Draw course numbers\n\t\tctx.fillStyle = SKY;\n\n\t\tctx.restore();\n\t}\n\treturn this;\n}\n"]},"metadata":{},"sourceType":"module"}